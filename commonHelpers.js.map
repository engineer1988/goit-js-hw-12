{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport let totalHits;\n\nexport default async function fetchImages(search, page, perPage) {\n  const params = new URLSearchParams({\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: perPage,\n  });\n\n  const API_KEY = '42241202-737945e445eb9c5ec6bcca7e8';\n  const URL = `https://pixabay.com/api/?key=${API_KEY}&q=${search}&${params}`;\n\n  const response = await axios.get(URL);\n  totalHits = response.data.totalHits;\n  return response.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nexport let number;\n\nexport default function renderImages(images) {\n  number = images.hits.length;\n  if (number === 0) {\n    iziToast.error({\n      maxWidth: '432px',\n      messageColor: 'rgb(250, 250, 251)',\n      messageSize: '16px',\n      backgroundColor: 'rgb(239, 64, 64)',\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n\n  const markup = images.hits\n    .map(image => {\n      return `\n            <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n              <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            </a>\n            <div class=\"image-text\">\n             <div class=\"image-text-item\">\n              <h2>Likes</h2>\n              <span class=\"span-size\">${image.likes}</span>\n             </div>\n             <div class=\"image-text-item\">\n              <h2>Views</h2>\n              <span class=\"span-size\">${image.views}</span>\n             </div>\n             <div class=\"image-text-item\">\n              <h2>Comments</h2>\n              <span class=\"span-size\">${image.comments}</span>\n             </div>\n             <div class=\"image-text-item\">\n              <h2>Downloads</h2>\n              <span class=\"span-size\">${image.downloads}</span>\n             </div>\n            </div>\n          </li>`;\n    })\n    .join('');\n\n  return markup;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport fetchImages from './js/pixabay-api';\nimport renderImages from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { number } from './js/render-functions';\nimport { totalHits } from './js/pixabay-api';\nlet page = 1;\nlet perPage = 15;\nlet totalPages;\nlet cardHeight;\nlet search;\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst addImagesBtn = document.querySelector('.btn');\nconst options = {\n  captionSelector: 'img',\n  captionsData: 'alt',\n  captionDelay: 250,\n};\n\nconst lightbox = new SimpleLightbox('.gallery a', options);\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  showLoader();\n  page = 1;\n  search = e.target.elements.search.value.trim();\n\n  fetchImages(search, page, perPage)\n    .then(images => renderImages(images))\n    .then(markup => {\n      viewLightBox(markup);\n      hideLoader();\n    })\n    .catch(error =>\n      iziToast.error({\n        maxWidth: '432px',\n        messageColor: 'rgb(250, 250, 251)',\n        messageSize: '16px',\n        backgroundColor: 'rgb(239, 64, 64)',\n        position: 'topRight',\n        message: `${error}`,\n      })\n    );\n  form.reset();\n});\n\naddImagesBtn.addEventListener('click', () => {\n  page += 1;\n  hideBtn();\n  fetchImages(search, page, perPage)\n    .then(images => renderImages(images))\n    .then(markup => {\n      viewLightBox(markup);\n    })\n    .catch(error =>\n      iziToast.error({\n        maxWidth: '432px',\n        messageColor: 'rgb(250, 250, 251)',\n        messageSize: '16px',\n        backgroundColor: 'rgb(239, 64, 64)',\n        position: 'topRight',\n        message: `${error}`,\n      })\n    );\n  form.reset();\n});\n\nfunction viewLightBox(markup) {\n  if (page === 1) {\n    gallery.innerHTML = '';\n    gallery.innerHTML = markup;\n  } else {\n    gallery.insertAdjacentHTML('beforeend', markup);\n  }\n  cardHeight = gallery.getBoundingClientRect().height / 2;\n\n  checkoutBtn();\n  totalHitsBtn();\n  lightbox.refresh();\n  scroll();\n}\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction showBtn() {\n  addImagesBtn.classList.remove('hidden');\n}\n\nfunction hideBtn() {\n  addImagesBtn.classList.add('hidden');\n}\n\nfunction checkoutBtn() {\n  if (number === 0) {\n    hideBtn();\n  } else {\n    showBtn();\n  }\n}\n\nfunction totalHitsBtn() {\n  totalPages = Math.ceil(totalHits / perPage);\n  if (page >= totalPages && !(number === 0)) {\n    hideBtn();\n    iziToast.error({\n      maxWidth: '432px',\n      messageColor: 'rgb(250, 250, 251)',\n      messageSize: '16px',\n      backgroundColor: 'rgb(239, 64, 64)',\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n}\n\nfunction scroll() {\n  window.scrollBy({\n    top: cardHeight,\n    behavior: 'smooth',\n  });\n}\n"],"names":["totalHits","fetchImages","search","page","perPage","params","URL","response","axios","number","renderImages","images","iziToast","image","totalPages","cardHeight","gallery","form","loader","addImagesBtn","options","lightbox","SimpleLightbox","showLoader","markup","viewLightBox","hideLoader","error","hideBtn","checkoutBtn","totalHitsBtn","scroll","showBtn"],"mappings":"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"}